Version 4
SHEET 1 1964 852
WIRE -320 -880 -352 -880
WIRE -224 -880 -256 -880
WIRE -64 -880 -144 -880
WIRE 16 -880 -64 -880
WIRE -528 -800 -528 -816
WIRE -64 -800 -64 -880
WIRE 16 -800 16 -880
WIRE 592 -672 592 -704
WIRE 960 -672 960 -704
WIRE 960 -672 848 -672
WIRE -64 -656 -64 -736
WIRE 16 -656 16 -720
WIRE 848 -656 848 -672
WIRE 960 -576 960 -672
WIRE 592 -560 592 -592
WIRE 672 -560 592 -560
WIRE 848 -560 848 -576
WIRE 848 -560 752 -560
WIRE 912 -560 848 -560
WIRE 592 -528 592 -560
WIRE 544 -448 464 -448
WIRE 960 -432 960 -480
WIRE 1104 -432 960 -432
WIRE 1120 -432 1104 -432
WIRE 1104 -400 1104 -432
WIRE -32 -352 -128 -352
WIRE 128 -352 48 -352
WIRE 592 -352 592 -432
WIRE -304 -336 -304 -352
WIRE 1104 -304 1104 -320
WIRE -16 -256 -16 -304
WIRE 32 -240 32 -304
WIRE -304 -224 -304 -256
FLAG -64 -656 0
FLAG -528 -720 0
FLAG 16 -880 CAP
FLAG 592 -352 0
FLAG 1120 -432 OUT
FLAG -528 -816 CHG
FLAG 464 -448 BAT_OK
FLAG 592 -704 CAP
FLAG 960 -352 0
FLAG -304 -224 0
FLAG -304 -352 BAT_OK
FLAG -352 -880 CHG
FLAG 16 -656 0
FLAG -16 -256 0
FLAG -128 -352 CAP
FLAG 32 -240 BAT_OK
FLAG 128 -352 STOR
FLAG 1104 -304 0
FLAG 1248 -656 0
FLAG 1248 -736 3V3
FLAG 960 -704 CAP
SYMBOL voltage -528 -816 R0
WINDOW 3 -57 -126 VRight 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 5.3 10 1p 1p 30 60)
SYMATTR InstName V1
SYMBOL cap -80 -800 R0
SYMATTR InstName C1
SYMATTR Value 470m
SYMATTR SpiceLine Rser=13m
SYMBOL res -128 -896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value R=5.3/0.8
SYMBOL nmos 544 -528 R0
SYMATTR InstName M1
SYMATTR Value BSB012N03LX3
SYMBOL res 576 -688 R0
SYMATTR InstName R2
SYMATTR Value 1Meg
SYMBOL pmos 912 -480 M180
SYMATTR InstName M2
SYMATTR Value FDS6575
SYMBOL res 944 -448 R0
SYMATTR InstName R6
SYMATTR Value 1Meg
SYMBOL res 768 -576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 1
SYMBOL res 832 -672 R0
SYMATTR InstName R8
SYMATTR Value 1Meg
SYMBOL bv -304 -352 R0
WINDOW 3 -105 168 Left 2
SYMATTR Value V=if(V(CAP)>2.5,V(CAP),0)
SYMATTR InstName B2
SYMBOL diode -320 -864 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL res 0 -816 R0
SYMATTR InstName R5
SYMATTR Value R=V(CAP)/1u
SYMBOL sw -48 -352 R270
SYMATTR InstName S1
SYMATTR Value MYSW2
SYMBOL res 1088 -416 R0
SYMATTR InstName RLOAD
SYMATTR Value R=V(CAP)/100m
SYMBOL voltage 1248 -752 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 3.3
TEXT -432 32 Left 2 !.tran 0 100 0 startup
TEXT -408 -88 Left 2 !.model MYSW2 SW(Ron=1 Roff=10Meg Vt=0.1 Vh=0)
TEXT -432 -984 Left 2 ;CAPACITOR CHARGING
TEXT -432 -520 Left 2 ;BATTERY OKAY SIGNAL & OUTPUT
TEXT 336 -808 Left 2 ;OUTPUT SIGNAL
TEXT 760 -240 Left 2 ;PFET on CAP shows current draw.\nPFET on 3V3 shows the output is kept as a 3V3 output
RECTANGLE Normal 240 -576 -432 -976 1
RECTANGLE Normal 224 -64 -432 -512 1
RECTANGLE Normal 1360 -256 336 -800 1
